"use strict";define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d});var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})});var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})}),define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d}),define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d});var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})});var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})}),define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d}),define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d});var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})}),function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/app/",b(b.s=3)}([function(a,b,c){var d=c(1),e=function(a){return a&&a.__esModule?a:{default:a}}(d);AV.init({appId:"wPyQjUmvJiSYs1ovT7uGsNE0-gzGzoHsz",appKey:"j182JIXghHrneWAiBDaqmuhR"}),new e.default({permalink:$("#wgt-comment").data("permalink"),dbComment:"Comment"})},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=(function(a){a&&a.__esModule}(g),function(){function a(b){d(this,a),this.props=Object.assign({dbComment:"Comment"},b),this.checkSetup()&&(this.sessionAuthor="commentAuthor",this.comments={},this.init(b))}return f(a,[{key:"checkSetup",value:function(){var a=[{key:"permalink",pass:!1}];return this.props.permalink?a.find(function(a){return"permalink"==a.key}).pass=!0:console.error("permalink required, which is the unique id for comments."),a.every(function(a){return 1==a.pass})}}]),f(a,[{key:"formatData",value:function(a){var b=function(a){var b=a.id,c=a.createdAt;return e({id:b,createdAt:c},a.attributes)};if(!a.length)return a.id?b(a):[];var c=[];return a.map(function(a){c.push(b(a))}),c}},{key:"init",value:function(a){var b=this,c=new AV.Query(this.props.dbComment);c.equalTo("permalink",this.props.permalink),c.find().then(function(a){var c=b.formatData(a);c.map(function(a){b.comments[a.id]=a}),b.render(c)},function(a){this.errorDeal(a)});var d=sessionStorage.getItem(this.sessionAuthor);d&&$(".comment__contentAuthor").val(d),this.eventHandler()}},{key:"eventHandler",value:function(){var a=this;$("input").on("keyup",function(){var a=$(this),b=+a.attr("max-length");this.value.length>=b&&a.val(this.value.trim().substring(0,b))});var b=$("#comment-form");b.on("click","#comment-box-submit",function(c){if(c.preventDefault(),!$(c.target).hasClass("disabled")){var d=b.serializeArray();if(a.lockSubmit(!0),a.validate(d)){var e=$(".comment__contentAuthor").val();e!=(sessionStorage.getItem(a.sessionAuthor)||"")&&sessionStorage.setItem(a.sessionAuthor,e),a.submitParams(d,function(b){a.saveToDB(a.props.dbComment,b,function(b){$("#comment-list").append(a.commentSingle(a.formatData(b),"comment__item")),a.resetPlaceholder("content"),a.lockSubmit(!1)},function(b){a.errorDeal(b),a.lockSubmit(!1)})})}else a.displayErrorMsg("#comment-form-footer","ÊòµÁß∞ÂíåËØÑËÆ∫Âú®‰∏ÄËµ∑ÊâçÊòØÊúÄÂ•ΩÁöÑ ^_^"),a.lockSubmit(!1)}}),$("#comment-list").on("click",".btn-reply",function(a){a.preventDefault();var c=$(this),d=c.data("content");window.location.href="#comment-form",$(".comment__replyComment").length?$(".comment__replyComment").find("pre").html(d):$('<div class="comment--clearfix comment--mb10 comment--fontsizeMeta comment__replyComment"/>').html('\n\t\t\t\t\t<span class="comment--grid-r comment__replyCancel">x</span>\n\t\t\t\t\t<pre>'+d+"</pre>\n\t\t\t\t").insertBefore(b),b.find('[name="parentId"]').val(c.attr("data-id"))}),$("#wgt-comment").on("click",".comment__replyCancel",function(){var a=$(this).parent(".comment__replyComment");b.find('[name="parentId"]').val(""),a.remove()})}},{key:"validate",value:function(a){return a.every(function(a){var b=$("[name="+a.name+"]"),c=+b.attr("max-length"),d=b.attr("required");switch(a.name){case"author":case"content":return d&&!!a.value&&a.value.length<c;default:return!0}})}},{key:"errorDeal",value:function(a){console.error(a),a&&a.code&&a.error?alert("Âí¶ÔºåËØ∑Ê±ÇÂá∫Èîô‰∫Üüò±üò±üò±È∫ªÁÉ¶Êà™ÂõæËÅîÁ≥ªÁÆ°ÁêÜÂëòÔºåÈîôËØØ‰ø°ÊÅØ‰∏∫ -> code:"+a.code+", error:"+a.error+"„ÄÇ"):alert("Âí¶ÔºåËØ∑Ê±ÇÂá∫Èîô‰∫ÜÔºåÈ∫ªÁÉ¶ËÅîÁ≥ªÁÆ°ÁêÜÂëòüò±üò±üò±"),this.lockSubmit(!1)}},{key:"saveToDB",value:function(a,b,c){var d=AV.Object.extend(a),e=new d;if(e.set(b),b.parentId){var f=AV.Object.createWithoutData("Comment",b.parentId);e.set("parentComment",f)}e.save().then(function(a){c(a)},function(a){this.errorDeal(a)})}},{key:"submitParams",value:function(a,b){var c={permalink:this.props.permalink};a.map(function(a){c[a.name]=a.value}),b(c)}},{key:"lockSubmit",value:function(a){var b=$("#comment-form"),c=$("#comment-box-submit");a?(b.find("input").each(function(){$(this).attr("disabled","disabled")}),c.addClass("disabled")):b.find("input").each(function(){$(this).removeAttr("disabled"),c.removeClass("disabled")})}},{key:"resetPlaceholder",value:function(a){switch(a){case"author":$(".comment__contentAuthor").val("");break;case"content":$(".comment__contentInput").val("")}var b=$(".comment__replyCancel");b.length&&b.click()}},{key:"commentSingle",value:function(a,b){var c="",d=a.parentId;if(d){var e=this.comments[d],f="";e&&e.content&&(f=e.content,f.length>20&&(f=f.substring(0,20)+"..."),c='\n\t\t\t\t\t<blockquote class="comment--fontsizeMeta comment__quote">\n\t\t\t\t\t\t<p>'+f+'\n\t\t\t\t\t\t\t<span class="comment--colorAccent">'+e.author+"</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</blockquote>\n\t\t\t\t")}return'\n\t\t\t<div class="'+b+'" id="comment-'+a.id+'">\n\t\t\t\t<article>\n\t\t\t\t\t<header class="comment__header">\n\t\t\t\t\t\t<span class="comment--colorAccent comment--fontsizeMeta comment__item--author">'+a.author+' </span>\n\t\t\t\t\t\t<time class="comment--colorMeta comment--fontsizeMeta comment__item--time">'+moment(a.createdAt).format("MM-DD-YYYY hh:mm:ss")+'</time>\n\t\t\t\t\t</header>\n\t\t\t\t\t<section class="comment--mt10">\n\t\t\t\t\t\t'+c+'\n\t\t\t\t\t\t<pre class="comment__content">'+a.content+'</pre>\n\t\t\t\t\t</section>\n\t\t\t\t\t<footer class="comment--tRight">\n\t\t\t\t\t\t<a href="#" class="comment--fontsizeMeta comment--colorAccent btn-reply" data-id="'+a.id+'" data-content="'+a.content.substring(0,20)+'">ÂõûÂ§ç</a>\n\t\t\t\t\t</footer>\n\t\t\t\t</article>\n\t\t\t</div>\n\t\t'}},{key:"render",value:function(a){var b=this,c="";if(!a.length)return c="Âø´Êù•Êä¢Âç†Ê≤ôÂèëÂêß~",$("#comment-list").html(c),!1;Object.keys(a).map(function(d){var e=a[d];if(e.author&&e.content&&e.display){var f=b.commentSingle(e,"comment__item");c+="\n\t\t\t\t"+f+"\n\t\t\t"}}),$("#comment-list").html(c)}},{key:"displayErrorMsg",value:function(a,b){var c=$("#comment-form-error");c.length?c.html(b).show():(c=$("<p/>").attr({class:"comment--grid comment--fontsizeMeta comment--colorError",id:"comment-form-error"}).html(b),$(a).append(c)),setTimeout(function(){c.hide()},2e3)}}]),a}());b.default=h},function(a,b){},function(a,b,c){a.exports=c(0)}]);var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})}),define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d}),define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d});var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})}),function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/app/",b(b.s=3)}([function(a,b,c){var d=c(1),e=function(a){return a&&a.__esModule?a:{default:a}}(d);AV.init({appId:"wPyQjUmvJiSYs1ovT7uGsNE0-gzGzoHsz",appKey:"j182JIXghHrneWAiBDaqmuhR"}),new e.default({permalink:$("#wgt-comment").data("permalink"),dbComment:"Comment"})},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=(function(a){a&&a.__esModule}(g),function(){function a(b){d(this,a),this.props=Object.assign({dbComment:"Comment"},b),this.checkSetup()&&(this.sessionAuthor="commentAuthor",this.comments={},this.init(b))}return f(a,[{key:"checkSetup",value:function(){var a=[{key:"permalink",pass:!1}];return this.props.permalink?a.find(function(a){return"permalink"==a.key}).pass=!0:console.error("permalink required, which is the unique id for comments."),a.every(function(a){return 1==a.pass})}}]),f(a,[{key:"formatData",value:function(a){var b=function(a){var b=a.id,c=a.createdAt;return e({id:b,createdAt:c},a.attributes)};if(!a.length)return a.id?b(a):[];var c=[];return a.map(function(a){c.push(b(a))}),c}},{key:"init",value:function(a){var b=this,c=new AV.Query(this.props.dbComment);c.equalTo("permalink",this.props.permalink),c.find().then(function(a){var c=b.formatData(a);c.map(function(a){b.comments[a.id]=a}),b.render(c)},function(a){this.errorDeal(a)});var d=sessionStorage.getItem(this.sessionAuthor);d&&$(".comment__contentAuthor").val(d),this.eventHandler()}},{key:"eventHandler",value:function(){var a=this;$("input").on("keyup",function(){var a=$(this),b=+a.attr("max-length");this.value.length>=b&&a.val(this.value.trim().substring(0,b))});var b=$("#comment-form");b.on("click","#comment-box-submit",function(c){if(c.preventDefault(),!$(c.target).hasClass("disabled")){var d=b.serializeArray();if(a.lockSubmit(!0),a.validate(d)){var e=$(".comment__contentAuthor").val();e!=(sessionStorage.getItem(a.sessionAuthor)||"")&&sessionStorage.setItem(a.sessionAuthor,e),a.submitParams(d,function(b){a.saveToDB(a.props.dbComment,b,function(b){$("#comment-list").append(a.commentSingle(a.formatData(b),"comment__item")),a.resetPlaceholder("content"),a.lockSubmit(!1)},function(b){a.errorDeal(b),a.lockSubmit(!1)})})}else a.displayErrorMsg("#comment-form-footer","ÊòµÁß∞ÂíåËØÑËÆ∫Âú®‰∏ÄËµ∑ÊâçÊòØÊúÄÂ•ΩÁöÑ ^_^"),a.lockSubmit(!1)}}),$("#comment-list").on("click",".btn-reply",function(a){a.preventDefault();var c=$(this),d=c.data("content");window.location.href="#comment-form",$(".comment__replyComment").length?$(".comment__replyComment").find("pre").html(d):$('<div class="comment--clearfix comment--mb10 comment--fontsizeMeta comment__replyComment"/>').html('\n\t\t\t\t\t<span class="comment--grid-r comment__replyCancel">x</span>\n\t\t\t\t\t<pre>'+d+"</pre>\n\t\t\t\t").insertBefore(b),b.find('[name="parentId"]').val(c.attr("data-id"))}),$("#wgt-comment").on("click",".comment__replyCancel",function(){var a=$(this).parent(".comment__replyComment");b.find('[name="parentId"]').val(""),a.remove()})}},{key:"validate",value:function(a){return a.every(function(a){var b=$("[name="+a.name+"]"),c=+b.attr("max-length"),d=b.attr("required");switch(a.name){case"author":case"content":return d&&!!a.value&&a.value.length<c;default:return!0}})}},{key:"errorDeal",value:function(a){console.error(a),a&&a.code&&a.error?alert("Âí¶ÔºåËØ∑Ê±ÇÂá∫Èîô‰∫Üüò±üò±üò±È∫ªÁÉ¶Êà™ÂõæËÅîÁ≥ªÁÆ°ÁêÜÂëòÔºåÈîôËØØ‰ø°ÊÅØ‰∏∫ -> code:"+a.code+", error:"+a.error+"„ÄÇ"):alert("Âí¶ÔºåËØ∑Ê±ÇÂá∫Èîô‰∫ÜÔºåÈ∫ªÁÉ¶ËÅîÁ≥ªÁÆ°ÁêÜÂëòüò±üò±üò±"),this.lockSubmit(!1)}},{key:"saveToDB",value:function(a,b,c){var d=AV.Object.extend(a),e=new d;if(e.set(b),b.parentId){var f=AV.Object.createWithoutData("Comment",b.parentId);e.set("parentComment",f)}e.save().then(function(a){c(a)},function(a){this.errorDeal(a)})}},{key:"submitParams",value:function(a,b){var c={permalink:this.props.permalink};a.map(function(a){c[a.name]=a.value}),b(c)}},{key:"lockSubmit",value:function(a){var b=$("#comment-form"),c=$("#comment-box-submit");a?(b.find("input").each(function(){$(this).attr("disabled","disabled")}),c.addClass("disabled")):b.find("input").each(function(){$(this).removeAttr("disabled"),c.removeClass("disabled")})}},{key:"resetPlaceholder",value:function(a){switch(a){case"author":$(".comment__contentAuthor").val("");break;case"content":$(".comment__contentInput").val("")}var b=$(".comment__replyCancel");b.length&&b.click()}},{key:"commentSingle",value:function(a,b){var c="",d=a.parentId;if(d){var e=this.comments[d],f="";e&&e.content&&(f=e.content,f.length>20&&(f=f.substring(0,20)+"..."),c='\n\t\t\t\t\t<blockquote class="comment--fontsizeMeta comment__quote">\n\t\t\t\t\t\t<p>'+f+'\n\t\t\t\t\t\t\t<span class="comment--colorAccent">'+e.author+"</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</blockquote>\n\t\t\t\t")}return'\n\t\t\t<div class="'+b+'" id="comment-'+a.id+'">\n\t\t\t\t<article>\n\t\t\t\t\t<header class="comment__header">\n\t\t\t\t\t\t<span class="comment--colorAccent comment--fontsizeMeta comment__item--author">'+a.author+' </span>\n\t\t\t\t\t\t<time class="comment--colorMeta comment--fontsizeMeta comment__item--time">'+moment(a.createdAt).format("MM-DD-YYYY hh:mm:ss")+'</time>\n\t\t\t\t\t</header>\n\t\t\t\t\t<section class="comment--mt10">\n\t\t\t\t\t\t'+c+'\n\t\t\t\t\t\t<pre class="comment__content">'+a.content+'</pre>\n\t\t\t\t\t</section>\n\t\t\t\t\t<footer class="comment--tRight">\n\t\t\t\t\t\t<a href="#" class="comment--fontsizeMeta comment--colorAccent btn-reply" data-id="'+a.id+'" data-content="'+a.content.substring(0,20)+'">ÂõûÂ§ç</a>\n\t\t\t\t\t</footer>\n\t\t\t\t</article>\n\t\t\t</div>\n\t\t'}},{key:"render",value:function(a){var b=this,c="";if(!a.length)return c="Âø´Êù•Êä¢Âç†Ê≤ôÂèëÂêß~",$("#comment-list").html(c),!1;Object.keys(a).map(function(d){var e=a[d];if(e.author&&e.content&&e.display){var f=b.commentSingle(e,"comment__item");c+="\n\t\t\t\t"+f+"\n\t\t\t"}}),$("#comment-list").html(c)}},{key:"displayErrorMsg",value:function(a,b){var c=$("#comment-form-error");c.length?c.html(b).show():(c=$("<p/>").attr({class:"comment--grid comment--fontsizeMeta comment--colorError",id:"comment-form-error"}).html(b),$(a).append(c)),setTimeout(function(){c.hide()},2e3)}}]),a}());b.default=h},function(a,b){},function(a,b,c){a.exports=c(0)}]);var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})}),define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d}),define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d});var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})}),function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/app/",b(b.s=3)}([function(a,b,c){var d=c(1),e=function(a){return a&&a.__esModule?a:{default:a}}(d);AV.init({appId:"wPyQjUmvJiSYs1ovT7uGsNE0-gzGzoHsz",appKey:"j182JIXghHrneWAiBDaqmuhR"}),new e.default({permalink:$("#wgt-comment").data("permalink"),dbComment:"Comment"})},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=(function(a){a&&a.__esModule}(g),function(){function a(b){d(this,a),this.props=Object.assign({dbComment:"Comment"},b),this.checkSetup()&&(this.sessionAuthor="commentAuthor",this.comments={},this.init(b))}return f(a,[{key:"checkSetup",value:function(){var a=[{key:"permalink",pass:!1}];return this.props.permalink?a.find(function(a){return"permalink"==a.key}).pass=!0:console.error("permalink required, which is the unique id for comments."),a.every(function(a){return 1==a.pass})}}]),f(a,[{key:"formatData",value:function(a){var b=function(a){var b=a.id,c=a.createdAt;return e({id:b,createdAt:c},a.attributes)};if(!a.length)return a.id?b(a):[];var c=[];return a.map(function(a){c.push(b(a))}),c}},{key:"init",value:function(a){var b=this,c=new AV.Query(this.props.dbComment);c.equalTo("permalink",this.props.permalink),c.find().then(function(a){var c=b.formatData(a);c.map(function(a){b.comments[a.id]=a}),b.render(c)},function(a){this.errorDeal(a)});var d=sessionStorage.getItem(this.sessionAuthor);d&&$(".comment__contentAuthor").val(d),this.eventHandler()}},{key:"eventHandler",value:function(){var a=this;$("input").on("keyup",function(){var a=$(this),b=+a.attr("max-length");this.value.length>=b&&a.val(this.value.trim().substring(0,b))});var b=$("#comment-form");b.on("click","#comment-box-submit",function(c){if(c.preventDefault(),!$(c.target).hasClass("disabled")){var d=b.serializeArray();if(a.lockSubmit(!0),a.validate(d)){var e=$(".comment__contentAuthor").val();e!=(sessionStorage.getItem(a.sessionAuthor)||"")&&sessionStorage.setItem(a.sessionAuthor,e),a.submitParams(d,function(b){a.saveToDB(a.props.dbComment,b,function(b){$("#comment-list").append(a.commentSingle(a.formatData(b),"comment__item")),a.resetPlaceholder("content"),a.lockSubmit(!1)},function(b){a.errorDeal(b),a.lockSubmit(!1)})})}else a.displayErrorMsg("#comment-form-footer","ÊòµÁß∞ÂíåËØÑËÆ∫Âú®‰∏ÄËµ∑ÊâçÊòØÊúÄÂ•ΩÁöÑ ^_^"),a.lockSubmit(!1)}}),$("#comment-list").on("click",".btn-reply",function(a){a.preventDefault();var c=$(this),d=c.data("content");window.location.href="#comment-form",$(".comment__replyComment").length?$(".comment__replyComment").find("pre").html(d):$('<div class="comment--clearfix comment--mb10 comment--fontsizeMeta comment__replyComment"/>').html('\n\t\t\t\t\t<span class="comment--grid-r comment__replyCancel">x</span>\n\t\t\t\t\t<pre>'+d+"</pre>\n\t\t\t\t").insertBefore(b),b.find('[name="parentId"]').val(c.attr("data-id"))}),$("#wgt-comment").on("click",".comment__replyCancel",function(){var a=$(this).parent(".comment__replyComment");b.find('[name="parentId"]').val(""),a.remove()})}},{key:"validate",value:function(a){return a.every(function(a){var b=$("[name="+a.name+"]"),c=+b.attr("max-length"),d=b.attr("required");switch(a.name){case"author":case"content":return d&&!!a.value&&a.value.length<c;default:return!0}})}},{key:"errorDeal",value:function(a){console.error(a),a&&a.code&&a.error?alert("Âí¶ÔºåËØ∑Ê±ÇÂá∫Èîô‰∫Üüò±üò±üò±È∫ªÁÉ¶Êà™ÂõæËÅîÁ≥ªÁÆ°ÁêÜÂëòÔºåÈîôËØØ‰ø°ÊÅØ‰∏∫ -> code:"+a.code+", error:"+a.error+"„ÄÇ"):alert("Âí¶ÔºåËØ∑Ê±ÇÂá∫Èîô‰∫ÜÔºåÈ∫ªÁÉ¶ËÅîÁ≥ªÁÆ°ÁêÜÂëòüò±üò±üò±"),this.lockSubmit(!1)}},{key:"saveToDB",value:function(a,b,c){var d=AV.Object.extend(a),e=new d;if(e.set(b),b.parentId){var f=AV.Object.createWithoutData("Comment",b.parentId);e.set("parentComment",f)}e.save().then(function(a){c(a)},function(a){this.errorDeal(a)})}},{key:"submitParams",value:function(a,b){var c={permalink:this.props.permalink};a.map(function(a){c[a.name]=a.value}),b(c)}},{key:"lockSubmit",value:function(a){var b=$("#comment-form"),c=$("#comment-box-submit");a?(b.find("input").each(function(){$(this).attr("disabled","disabled")}),c.addClass("disabled")):b.find("input").each(function(){$(this).removeAttr("disabled"),c.removeClass("disabled")})}},{key:"resetPlaceholder",value:function(a){switch(a){case"author":$(".comment__contentAuthor").val("");break;case"content":$(".comment__contentInput").val("")}var b=$(".comment__replyCancel");b.length&&b.click()}},{key:"commentSingle",value:function(a,b){var c="",d=a.parentId;if(d){var e=this.comments[d],f="";e&&e.content&&(f=e.content,f.length>20&&(f=f.substring(0,20)+"..."),c='\n\t\t\t\t\t<blockquote class="comment--fontsizeMeta comment__quote">\n\t\t\t\t\t\t<p>'+f+'\n\t\t\t\t\t\t\t<span class="comment--colorAccent">'+e.author+"</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</blockquote>\n\t\t\t\t")}return'\n\t\t\t<div class="'+b+'" id="comment-'+a.id+'">\n\t\t\t\t<article>\n\t\t\t\t\t<header class="comment__header">\n\t\t\t\t\t\t<span class="comment--colorAccent comment--fontsizeMeta comment__item--author">'+a.author+' </span>\n\t\t\t\t\t\t<time class="comment--colorMeta comment--fontsizeMeta comment__item--time">'+moment(a.createdAt).format("MM-DD-YYYY hh:mm:ss")+'</time>\n\t\t\t\t\t</header>\n\t\t\t\t\t<section class="comment--mt10">\n\t\t\t\t\t\t'+c+'\n\t\t\t\t\t\t<pre class="comment__content">'+a.content+'</pre>\n\t\t\t\t\t</section>\n\t\t\t\t\t<footer class="comment--tRight">\n\t\t\t\t\t\t<a href="#" class="comment--fontsizeMeta comment--colorAccent btn-reply" data-id="'+a.id+'" data-content="'+a.content.substring(0,20)+'">ÂõûÂ§ç</a>\n\t\t\t\t\t</footer>\n\t\t\t\t</article>\n\t\t\t</div>\n\t\t'}},{key:"render",value:function(a){var b=this,c="";if(!a.length)return c="Âø´Êù•Êä¢Âç†Ê≤ôÂèëÂêß~",$("#comment-list").html(c),!1;Object.keys(a).map(function(d){var e=a[d];if(e.author&&e.content&&e.display){var f=b.commentSingle(e,"comment__item");c+="\n\t\t\t\t"+f+"\n\t\t\t"}}),$("#comment-list").html(c)}},{key:"displayErrorMsg",value:function(a,b){var c=$("#comment-form-error");c.length?c.html(b).show():(c=$("<p/>").attr({class:"comment--grid comment--fontsizeMeta comment--colorError",id:"comment-form-error"}).html(b),$(a).append(c)),setTimeout(function(){c.hide()},2e3)}}]),a}());b.default=h},function(a,b){},function(a,b,c){a.exports=c(0)}]);var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})}),define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d}),define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d});var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})}),function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/app/",b(b.s=3)}([function(a,b,c){var d=c(1),e=function(a){return a&&a.__esModule?a:{default:a}}(d);AV.init({appId:"wPyQjUmvJiSYs1ovT7uGsNE0-gzGzoHsz",appKey:"j182JIXghHrneWAiBDaqmuhR"}),new e.default({permalink:$("#wgt-comment").data("permalink"),dbComment:"Comment"})},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(2),h=(function(a){a&&a.__esModule}(g),function(){function a(b){d(this,a),this.props=Object.assign({dbComment:"Comment"},b),this.checkSetup()&&(this.sessionAuthor="commentAuthor",this.comments={},this.init(b))}return f(a,[{key:"checkSetup",value:function(){var a=[{key:"permalink",pass:!1}];return this.props.permalink?a.find(function(a){return"permalink"==a.key}).pass=!0:console.error("permalink required, which is the unique id for comments."),a.every(function(a){return 1==a.pass})}}]),f(a,[{key:"formatData",value:function(a){var b=function(a){var b=a.id,c=a.createdAt;return e({id:b,createdAt:c},a.attributes)};if(!a.length)return a.id?b(a):[];var c=[];return a.map(function(a){c.push(b(a))}),c}},{key:"init",value:function(a){var b=this,c=new AV.Query(this.props.dbComment);c.equalTo("permalink",this.props.permalink),c.find().then(function(a){var c=b.formatData(a);c.map(function(a){b.comments[a.id]=a}),b.render(c)},function(a){this.errorDeal(a)});var d=sessionStorage.getItem(this.sessionAuthor);d&&$(".comment__contentAuthor").val(d),this.eventHandler()}},{key:"eventHandler",value:function(){var a=this;$("input").on("keyup",function(){var a=$(this),b=+a.attr("max-length");this.value.length>=b&&a.val(this.value.trim().substring(0,b))});var b=$("#comment-form");b.on("click","#comment-box-submit",function(c){if(c.preventDefault(),!$(c.target).hasClass("disabled")){var d=b.serializeArray();if(a.lockSubmit(!0),a.validate(d)){var e=$(".comment__contentAuthor").val();e!=(sessionStorage.getItem(a.sessionAuthor)||"")&&sessionStorage.setItem(a.sessionAuthor,e),a.submitParams(d,function(b){a.saveToDB(a.props.dbComment,b,function(b){$("#comment-list").append(a.commentSingle(a.formatData(b),"comment__item")),a.resetPlaceholder("content"),a.lockSubmit(!1)},function(b){a.errorDeal(b),a.lockSubmit(!1)})})}else a.displayErrorMsg("#comment-form-footer","ÊòµÁß∞ÂíåËØÑËÆ∫Âú®‰∏ÄËµ∑ÊâçÊòØÊúÄÂ•ΩÁöÑ ^_^"),a.lockSubmit(!1)}}),$("#comment-list").on("click",".btn-reply",function(a){a.preventDefault();var c=$(this),d=c.data("content");window.location.href="#comment-form",$(".comment__replyComment").length?$(".comment__replyComment").find("pre").html(d):$('<div class="comment--clearfix comment--mb10 comment--fontsizeMeta comment__replyComment"/>').html('\n\t\t\t\t\t<span class="comment--grid-r comment__replyCancel">x</span>\n\t\t\t\t\t<pre>'+d+"</pre>\n\t\t\t\t").insertBefore(b),b.find('[name="parentId"]').val(c.attr("data-id"))}),$("#wgt-comment").on("click",".comment__replyCancel",function(){var a=$(this).parent(".comment__replyComment");b.find('[name="parentId"]').val(""),a.remove()})}},{key:"validate",value:function(a){return a.every(function(a){var b=$("[name="+a.name+"]"),c=+b.attr("max-length"),d=b.attr("required");switch(a.name){case"author":case"content":return d&&!!a.value&&a.value.length<c;default:return!0}})}},{key:"errorDeal",value:function(a){console.error(a),a&&a.code&&a.error?alert("Âí¶ÔºåËØ∑Ê±ÇÂá∫Èîô‰∫Üüò±üò±üò±È∫ªÁÉ¶Êà™ÂõæËÅîÁ≥ªÁÆ°ÁêÜÂëòÔºåÈîôËØØ‰ø°ÊÅØ‰∏∫ -> code:"+a.code+", error:"+a.error+"„ÄÇ"):alert("Âí¶ÔºåËØ∑Ê±ÇÂá∫Èîô‰∫ÜÔºåÈ∫ªÁÉ¶ËÅîÁ≥ªÁÆ°ÁêÜÂëòüò±üò±üò±"),this.lockSubmit(!1)}},{key:"saveToDB",value:function(a,b,c){var d=AV.Object.extend(a),e=new d;if(e.set(b),b.parentId){var f=AV.Object.createWithoutData("Comment",b.parentId);e.set("parentComment",f)}e.save().then(function(a){c(a)},function(a){this.errorDeal(a)})}},{key:"submitParams",value:function(a,b){var c={permalink:this.props.permalink};a.map(function(a){c[a.name]=a.value}),b(c)}},{key:"lockSubmit",value:function(a){var b=$("#comment-form"),c=$("#comment-box-submit");a?(b.find("input").each(function(){$(this).attr("disabled","disabled")}),c.addClass("disabled")):b.find("input").each(function(){$(this).removeAttr("disabled"),c.removeClass("disabled")})}},{key:"resetPlaceholder",value:function(a){switch(a){case"author":$(".comment__contentAuthor").val("");break;case"content":$(".comment__contentInput").val("")}var b=$(".comment__replyCancel");b.length&&b.click()}},{key:"commentSingle",value:function(a,b){var c="",d=a.parentId;if(d){var e=this.comments[d],f="";e&&e.content&&(f=e.content,f.length>20&&(f=f.substring(0,20)+"..."),c='\n\t\t\t\t\t<blockquote class="comment--fontsizeMeta comment__quote">\n\t\t\t\t\t\t<p>'+f+'\n\t\t\t\t\t\t\t<span class="comment--colorAccent">'+e.author+"</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</blockquote>\n\t\t\t\t")}return'\n\t\t\t<div class="'+b+'" id="comment-'+a.id+'">\n\t\t\t\t<article>\n\t\t\t\t\t<header class="comment__header">\n\t\t\t\t\t\t<span class="comment--colorAccent comment--fontsizeMeta comment__item--author">'+a.author+' </span>\n\t\t\t\t\t\t<time class="comment--colorMeta comment--fontsizeMeta comment__item--time">'+moment(a.createdAt).format("MM-DD-YYYY hh:mm:ss")+'</time>\n\t\t\t\t\t</header>\n\t\t\t\t\t<section class="comment--mt10">\n\t\t\t\t\t\t'+c+'\n\t\t\t\t\t\t<pre class="comment__content">'+a.content+'</pre>\n\t\t\t\t\t</section>\n\t\t\t\t\t<footer class="comment--tRight">\n\t\t\t\t\t\t<a href="#" class="comment--fontsizeMeta comment--colorAccent btn-reply" data-id="'+a.id+'" data-content="'+a.content.substring(0,20)+'">ÂõûÂ§ç</a>\n\t\t\t\t\t</footer>\n\t\t\t\t</article>\n\t\t\t</div>\n\t\t'}},{key:"render",value:function(a){var b=this,c="";if(!a.length)return c='<p class="comment--colorAccent comment__pEmpty">Âø´Êù•Êä¢Âç†Ê≤ôÂèëÂêß~</p>',$("#comment-list").html(c),!1;Object.keys(a).map(function(d){var e=a[d];if(e.author&&e.content&&e.display){
var f=b.commentSingle(e,"comment__item");c+="\n\t\t\t\t"+f+"\n\t\t\t"}}),$("#comment-list").html(c)}},{key:"displayErrorMsg",value:function(a,b){var c=$("#comment-form-error");c.length?c.html(b).show():(c=$("<p/>").attr({class:"comment--grid comment--fontsizeMeta comment--colorError",id:"comment-form-error"}).html(b),$(a).append(c)),setTimeout(function(){c.hide()},2e3)}}]),a}());b.default=h},function(a,b){},function(a,b,c){a.exports=c(0)}]);var Zoom=require("zoom");$(document).on("click","img",function(){var a=$(this),b=$(window),c=b.width(),d=b.height(),e=this.naturalWidth,f=this.naturalHeight,g=Math.min(c,e),h=Math.min(d,f);$("body").css({width:c,height:d,overflow:"hidden"}),a.css({position:"absolute",top:(d-h)/2+"px",left:(c-g)/2+"px",width:c+"px"})}),define("zoom",function(a,b,c){var d={version:"0.1.0"};c.exports=d});